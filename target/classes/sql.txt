#Creates test instance

CREATE USER test IDENTIFIED BY password;
GRANT CONNECT, RESOURCE TO test;
GRANT CREATE SESSION TO test;
ALTER USER test QUOTA 10M ON system;

#Create Users for test, MAKE SURE THIS IS RUN AS THE test USER

INSERT INTO icms_user
VALUES (0, 7, 'harley@halley.com', 'Harley', 'Halley', 'password', 0, 'civilwardabest');

INSERT INTO icms_user
VALUES (15, 1, 'hdadmin@icms.com', 'Roymond', 'Horsewingding', '12345678', 1, 'roymondhd');

INSERT INTO icms_user
VALUES (101, 6, 'genadmin@icms.com', 'Tom', 'Bombadil', 'section', 2, 'pointless');


#Create Users for production, MAKE SURE THIS IS RUN FOR THE PRODUCTION ENVIRONMENT

INSERT INTO icms_user
VALUES (0, 7, 'harley@halley.com', 'Harley', 'Halley', 'password', 0, 'civilwardabest');

INSERT INTO icms_user
VALUES (15, 1, 'hdadmin@icms.com', 'Roymond', 'Horsewingding', '12345678', 1, 'roymondhd');

INSERT INTO icms_user
VALUES (101, 6, 'genadmin@icms.com', 'Tom', 'Bombadil', 'section', 2, 'pointless');

#Production tables

CREATE TABLE "TRAINEE1"."ICMS_USER" 
   (
   	"USER_ID" NUMBER(10,0) NOT NULL ENABLE, 
	"DEPARTMENT_ID" NUMBER(10,0), 
	"EMAIL" VARCHAR2(255 CHAR), 
	"FIRST_NAME" VARCHAR2(255 CHAR), 
	"LAST_NAME" VARCHAR2(255 CHAR), 
	"PASSWORD" VARCHAR2(255 CHAR), 
	"ROLE" NUMBER(10,0), 
	"USERNAME" VARCHAR2(255 CHAR), 
	 PRIMARY KEY ("USER_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "ICMS_PRODUCTION" ;
  
   CREATE TABLE "TRAINEE1"."ICMS_ISSUE_COMMENT" 
   (	
    "COMMENT_ID" NUMBER(10,0) NOT NULL ENABLE, 
	"DATE_CREATED" DATE (6), 
	"USER_COMMENT" VARCHAR2(3500 CHAR), 
	"USER_ID" NUMBER(10,0), 
	"ISSUE_ID" NUMBER(10,0), 
	 PRIMARY KEY ("COMMENT_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE, 
	 CONSTRAINT "FKFDI8J5NAMB9W5SOIOL79YE5M3" FOREIGN KEY ("ISSUE_ID")
	  REFERENCES "TRAINEE1"."ISSUES" ("ISSUE_ID") ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "ICMS_PRODUCTION" ;
  
  
  CREATE TABLE "TRAINEE1"."ICMS_ISSUE" 
   (	
    "ISSUE_ID" NUMBER(10,0) NOT NULL ENABLE, 
	"DEPARTMENT" NUMBER(10,0), 
	"DATE_RESOLVED" DATE (6), 
	"DATE_SUBMITTED" DATE (6), 
	"PRIORITY" NUMBER(10,0), 
	"STATUS" NUMBER(10,0), 
	"SUBMITTED_BY" NUMBER(19,0), 
	"TITLE" VARCHAR2(255 CHAR), 
	"USER_DESCRIPTION" VARCHAR2(3500 CHAR), 
	 PRIMARY KEY ("ISSUE_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "ICMS_PRODUCTION" ;
  
  
  #Test Database
  CREATE TABLE "TEST"."ICMS_USER" 
   (
   	"USER_ID" NUMBER(10,0) NOT NULL ENABLE, 
	"DEPARTMENT_ID" NUMBER(10,0), 
	"EMAIL" VARCHAR2(255 CHAR), 
	"FIRST_NAME" VARCHAR2(255 CHAR), 
	"LAST_NAME" VARCHAR2(255 CHAR), 
	"PASSWORD" VARCHAR2(255 CHAR), 
	"ROLE" NUMBER(10,0), 
	"USERNAME" VARCHAR2(255 CHAR), 
	 PRIMARY KEY ("USER_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "ICMS_TEST" ;
  
   CREATE TABLE "TEST"."ICMS_ISSUE_COMMENT" 
   (	
    "COMMENT_ID" NUMBER(10,0) NOT NULL ENABLE, 
	"DATE_CREATED" DATE (6), 
	"USER_COMMENT" VARCHAR2(3500 CHAR), 
	"USER_ID" NUMBER(10,0), 
	"ISSUE_ID" NUMBER(10,0), 
	 PRIMARY KEY ("COMMENT_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE, 
	 CONSTRAINT "FKFDI8J5NAMB9W5SOIOL79YE5M3" FOREIGN KEY ("ISSUE_ID")
	  REFERENCES "TRAINEE1"."ISSUES" ("ISSUE_ID") ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "ICMS_TEST" ;
  
  
  CREATE TABLE "TEST"."ICMS_ISSUE" 
   (	
    "ISSUE_ID" NUMBER(10,0) NOT NULL ENABLE, 
	"DEPARTMENT" NUMBER(10,0), 
	"DATE_RESOLVED" DATE (6), 
	"DATE_SUBMITTED" DATE (6), 
	"PRIORITY" NUMBER(10,0), 
	"STATUS" NUMBER(10,0), 
	"SUBMITTED_BY" NUMBER(19,0), 
	"TITLE" VARCHAR2(255 CHAR), 
	"USER_DESCRIPTION" VARCHAR2(3500 CHAR), 
	 PRIMARY KEY ("ISSUE_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "ICMS_TEST" ;
  
  